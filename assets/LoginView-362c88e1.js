import{S as _}from"./sweetalert2.all-6ed5875d.js";import{_ as h,r as l,o as f,c as V,a as e,g as t,w as b,l as m}from"./index-f7e34bef.js";const{VITE_URL:w}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/boardGameSellStation/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},g={data(){return{user:{},loadingItem:""}},methods:{login(){this.loadingItem="login",this.$http.post(`${w}/v2/admin/signin`,{username:this.user.account,password:this.user.password}).then(a=>{const{expired:s,token:i}=a.data;document.cookie=`myToken=${i}; expires=${new Date(s)}`,_.fire({icon:"success",title:"登入成功",showConfirmButton:!1,timer:1e3,didClose:()=>{this.$router.push("/admin/products")}})}).catch(a=>{console.log(a),alert("登入失敗")}).finally(()=>{this.loadingItem=""})}}},v={class:"row justify-content-center"},x={class:"col-4"},y=e("h2",{class:"text-center"},"登入",-1),E={class:"mb-3"},S=e("label",{for:"account",class:"h5"},"帳號:",-1),k={class:"mb-3"},I=e("label",{for:"password",class:"h5"},"密碼:",-1),B={class:"text-center"},C=["disabled"];function R(a,s,i,T,o,u){const r=l("VField"),c=l("ErrorMessage"),p=l("VForm");return f(),V("div",v,[e("div",x,[y,t(p,{onSubmit:u.login,class:"my-5"},{default:b(({errors:d})=>[e("div",E,[S,t(r,{id:"account",name:"帳號",type:"text",class:m(["form-control",{"is-invalid":d.帳號}]),placeholder:"請輸入 帳號",rules:"required|email",modelValue:o.user.account,"onUpdate:modelValue":s[0]||(s[0]=n=>o.user.account=n)},null,8,["class","modelValue"]),t(c,{name:"帳號",class:"invalid-feedback"})]),e("div",k,[I,t(r,{id:"password",name:"密碼",type:"password",class:m(["form-control",{"is-invalid":d.密碼}]),placeholder:"請輸入 密碼",rules:"required",modelValue:o.user.password,"onUpdate:modelValue":s[1]||(s[1]=n=>o.user.password=n)},null,8,["class","modelValue"]),t(c,{name:"密碼",class:"invalid-feedback"})]),e("div",B,[e("button",{type:"submit",class:"btn btn-primary w-100",disabled:o.loadingItem==="login"}," 登入 ",8,C)])]),_:1},8,["onSubmit"])])])}const F=h(g,[["render",R]]);export{F as default};
