import{S as _}from"./sweetalert2.all-716dd39f.js";import{_ as h,r as l,o as f,c as V,a as s,g as t,w as b,l as m}from"./index-cc83d5b9.js";const{VITE_URL:w}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/boardGameSellStation/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},g={data(){return{user:{},loadingItem:""}},methods:{login(){this.loadingItem="login",this.$http.post(`${w}/v2/admin/signin`,{username:this.user.account,password:this.user.password}).then(n=>{const{expired:e,token:i}=n.data;document.cookie=`myToken=${i}; expires=${new Date(e)}`,_.fire({icon:"success",title:"登入成功",showConfirmButton:!1,timer:1e3,didClose:()=>{this.$router.push("/admin/products")}})}).catch(n=>{console.log(n),alert("登入失敗")}).finally(()=>{this.loadingItem=""})}}},v={class:"container"},x={class:"row justify-content-center"},y={class:"col-4"},E=s("h2",{class:"text-center"},"登入",-1),S={class:"mb-3"},k=s("label",{for:"account",class:"h5"},"帳號:",-1),I={class:"mb-3"},B=s("label",{for:"password",class:"h5"},"密碼:",-1),C={class:"text-center"},R=["disabled"];function T(n,e,i,U,o,u){const c=l("VField"),r=l("ErrorMessage"),p=l("VForm");return f(),V("div",v,[s("div",x,[s("div",y,[E,t(p,{onSubmit:u.login,class:"my-5"},{default:b(({errors:d})=>[s("div",S,[k,t(c,{id:"account",name:"帳號",type:"text",class:m(["form-control",{"is-invalid":d.帳號}]),placeholder:"請輸入 帳號",rules:"required|email",modelValue:o.user.account,"onUpdate:modelValue":e[0]||(e[0]=a=>o.user.account=a)},null,8,["class","modelValue"]),t(r,{name:"帳號",class:"invalid-feedback"})]),s("div",I,[B,t(c,{id:"password",name:"密碼",type:"password",class:m(["form-control",{"is-invalid":d.密碼}]),placeholder:"請輸入 密碼",rules:"required",modelValue:o.user.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.user.password=a)},null,8,["class","modelValue"]),t(r,{name:"密碼",class:"invalid-feedback"})]),s("div",C,[s("button",{type:"submit",class:"btn btn-primary w-100",disabled:o.loadingItem==="login"}," 登入 ",8,R)])]),_:1},8,["onSubmit"])])])])}const L=h(g,[["render",T]]);export{L as default};
