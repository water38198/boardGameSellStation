import{_ as p,o as h,c as m,a as t,e,w as n,b as i,r as c,S as u,k,f as b}from"./index-9ZAInmHq.js";const g={methods:{logout(){document.cookie="myToken=; expires=Thu, 01 Jan 1970 00:00:00 GMT;",this.$router.push("/login")}}},$={class:"navbar navbar-expand bg-dark","data-bs-theme":"dark"},x={class:"container"},C={class:"collapse navbar-collapse",id:"navbarContent"},L={class:"w-100 navbar-nav gap-6 justify-content-end align-items-center"},V={class:"nav-item link-light"},y={class:"nav-item"},T={class:"nav-item"},R={class:"nav-item"},w={class:"nav-item"},D={class:"nav-item"};function E(l,a,o,f,r,d){const s=c("RouterLink");return h(),m("nav",$,[t("div",x,[e(s,{class:"navbar-brand",to:"/"},{default:n(()=>[i("桌遊販電")]),_:1}),t("div",C,[t("ul",L,[t("li",V,[e(s,{to:"/dashboard/products",class:"link-light"},{default:n(()=>[i("商品管理")]),_:1})]),t("li",y,[e(s,{to:"/dashboard/orders",class:"link-light"},{default:n(()=>[i("訂單管理")]),_:1})]),t("li",T,[e(s,{to:"/dashboard/coupons",class:"link-light"},{default:n(()=>[i("優惠券管理")]),_:1})]),t("li",R,[e(s,{to:"/dashboard/articles",class:"link-light"},{default:n(()=>[i("文章管理")]),_:1})]),t("li",w,[e(s,{to:"/",class:"link-light"},{default:n(()=>[i("回前台")]),_:1})]),t("li",D,[t("button",{type:"button",class:"btn btn-light",onClick:a[0]||(a[0]=(..._)=>d.logout&&d.logout(..._))},"登出")])])])])])}const N=p(g,[["render",E]]);var S={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/boardGameSellStation/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:B}=S,A={components:{DashboardNavbar:N},data(){return{isChecked:!1,isLoading:!1}},methods:{async loginCheck(){var a;this.isLoading=!0;const l=(a=document.cookie.split("; ").find(o=>o.startsWith("myToken=")))==null?void 0:a.split("=")[1];this.axios.defaults.headers.common.Authorization=l;try{const o=await this.axios.post(`${B}/v2/api/user/check`);this.isChecked=!0,o.data.success||u.fire({title:"錯誤發生",icon:"error",text:"請重新登入",didClose:()=>{this.$router.push("/login")}})}catch(o){u.fire({title:"錯誤發生",icon:"error",text:`${o.response.data.message}`,didClose:()=>{this.$router.push("/login")}})}finally{this.isLoading=!1}}},mounted(){this.loginCheck()}},I=t("h1",{class:"text-center"},"後台",-1),U=t("hr",null,null,-1),G=t("hr",null,null,-1),M={class:"container"};function O(l,a,o,f,r,d){const s=c("VLoading"),_=c("DashboardNavbar"),v=c("RouterView");return h(),m("div",null,[e(s,{active:r.isLoading},null,8,["active"]),I,U,e(_),G,t("div",M,[r.isChecked?(h(),k(v,{key:0})):b("",!0)])])}const j=p(A,[["render",O]]);export{j as default};
