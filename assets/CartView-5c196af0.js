import{c as C}from"./cartStore-580ef00a.js";import{m as x,_ as F,r as b,o as a,c as d,a as e,f as c,w as N,n as g,e as S,F as h,j as f,g as V,l as k,v as L,t as i,q as O,s as U,b as j,p as B,d as M}from"./index-af0b791f.js";import{u as A}from"./utilities-5292ba46.js";const E={data(){return{user:{}}},methods:{isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要09開頭的手機號碼十碼"},...x(A,["timeTransform"]),...x(C,["sendOrder"])},props:["getCarts","cart"]},T={class:"bg-white"},D=e("h3",{class:"h3 text-center text-theme"},"顧客資訊",-1),P=e("p",{class:"text-center mb-0"},"*為必填",-1),R={class:"row justify-content-center"},z={class:"col-10 col-md-8"},X={class:"row"},G={class:"mb-3 col-md-6"},H=e("label",{for:"name",class:"h5"},"*姓名:",-1),J={class:"mb-3 col-md-6"},K=e("label",{for:"tel",class:"h5"},"*電話:",-1),Q={class:"mb-3 col-md-6"},W=e("label",{for:"email",class:"h5"},"*電子郵件:",-1),Y={class:"mb-3"},Z=e("label",{for:"address",class:"h5"},"*地址:",-1),ee={class:"mb-3"},te=e("label",{for:"message",class:"h5"},"附註:",-1),se={class:"text-center"},oe=["disabled"];function le(t,o,w,q,l,$){const m=b("VField"),_=b("ErrorMessage"),y=b("VForm");return a(),d("div",T,[D,P,e("div",R,[e("div",z,[c(y,{onSubmit:o[5]||(o[5]=u=>t.sendOrder(l.user)),class:"mt-4 mb-5",ref:"userForm"},{default:N(({errors:u})=>{var v;return[e("div",X,[e("div",G,[H,c(m,{id:"name",name:"姓名",type:"text",class:g(["form-control",{"is-invalid":u.姓名}]),placeholder:"請輸入 姓名",rules:"required",modelValue:l.user.name,"onUpdate:modelValue":o[0]||(o[0]=r=>l.user.name=r)},null,8,["class","modelValue"]),c(_,{name:"姓名",class:"invalid-feedback"})]),e("div",J,[K,c(m,{id:"tel",name:"電話",type:"tel",class:g(["form-control",{"is-invalid":u.電話}]),placeholder:"請輸入 電話",rules:$.isPhone,modelValue:l.user.tel,"onUpdate:modelValue":o[1]||(o[1]=r=>l.user.tel=r)},null,8,["class","rules","modelValue"]),c(_,{name:"電話",class:"invalid-feedback"})]),e("div",Q,[W,c(m,{id:"email",name:"電子郵件",type:"email",class:g(["form-control",{"is-invalid":u.電子郵件}]),placeholder:"請輸入 電子郵件",rules:"required||email",modelValue:l.user.email,"onUpdate:modelValue":o[2]||(o[2]=r=>l.user.email=r)},null,8,["class","modelValue"]),c(_,{name:"電子郵件",class:"invalid-feedback"})]),e("div",Y,[Z,c(m,{id:"address",name:"地址",type:"text",class:g(["form-control",{"is-invalid":u.地址}]),placeholder:"請輸入 地址",rules:"required",modelValue:l.user.address,"onUpdate:modelValue":o[3]||(o[3]=r=>l.user.address=r)},null,8,["class","modelValue"]),c(_,{name:"地址",class:"invalid-feedback"})]),e("div",ee,[te,c(m,{id:"message",name:"附註",type:"text",class:g(["form-control",{"is-invalid":u.附註}]),placeholder:"請輸入 想給店家的話",modelValue:l.user.message,"onUpdate:modelValue":o[4]||(o[4]=r=>l.user.message=r),as:"textarea",cols:"10",rows:"5"},null,8,["class","modelValue"]),c(_,{name:"地址",class:"invalid-feedback"})])]),e("div",se,[e("button",{type:"submit",class:"btn btn-theme w-100 py-2 text-white",disabled:!((v=w.cart.carts)!=null&&v.length)}," 送出 ",8,oe)])]}),_:1},512)])])])}const ne=F(E,[["render",le]]);const ae={data(){return{code:""}},computed:{...S(C,["cart","cartLoading","loadingItem"])},methods:{...x(C,["updateItemNum","deleteCartItem","deleteCartAll","getCarts","useCoupon"])},components:{OrderForm:ne}},p=t=>(B("data-v-d2c6580b"),t=t(),M(),t),de={class:"vl-parent"},ce={class:"container-lg px-lg-5 pt-100"},re={class:"bg-white px-lg-4"},ie=p(()=>e("h3",{class:"text-center text-theme h3 mb-4"},"購物車",-1)),ue={class:"d-none d-sm-block"},me={class:"table mt-5 align-middle"},_e=p(()=>e("thead",null,[e("tr",null,[e("th"),e("th",{class:"text-center"},"商品圖片"),e("th",null,"商品名稱"),e("th",null,"數量/單位"),e("th",{class:"text-end"},"單價"),e("th",{class:"text-end"},"總價")])],-1)),pe={style:{width:"50px"}},he=["disabled","onClick"],be={class:"text-center",style:{width:"20%"}},ve=["src","alt"],ge=["onUpdate:modelValue","onChange"],fe=["value"],ye={class:"text-end"},Ve={class:"text-end"},ke={key:0},Ce={class:"text-end",colspan:"7"},xe=["disabled"],we={class:"d-sm-none list-unstyled cart-list"},$e={class:"row g-0"},Ie={class:"col-6"},Ue=["src","alt"],Fe={class:"col-6"},Ne={class:"p-2 d-flex flex-column h-100"},qe={class:"card-title h6"},Se={class:"mb-2"},Le={class:"card-text d-flex align-items-center mb-2"},Oe=p(()=>e("span",{class:"mb-2 d-inline-block"},"數量：",-1)),je=["onUpdate:modelValue","onChange"],Be=["value"],Me={class:"mt-auto text-center"},Ae=["disabled","onClick"],Ee={class:"bg-white mb-5 px-3 px-lg-4"},Te={class:"list-unstyled"},De={class:"d-flex"},Pe={class:"input-group mb-3 ms-auto",style:{width:"250px"}},Re={key:0,class:"text-end"},ze={class:"text-danger ms-2"},Xe={class:"d-flex border-bottom py-3"},Ge={class:"ms-auto d-flex justify-content-between",style:{width:"300px"}},He=p(()=>e("span",null,"總金額：",-1)),Je={class:"d-flex border-bottom py-3"},Ke={class:"ms-auto d-flex justify-content-between",style:{width:"300px"}},Qe=p(()=>e("span",null,"付款金額：",-1)),We={key:1,class:"mt-5 py-5 text-center"},Ye=p(()=>e("h4",{class:"fs-2"},"目前購物車中沒有東西喔!!",-1)),Ze=p(()=>e("p",{class:"fs-4"},"趕快來看看有什麼好物吧!",-1));function et(t,o,w,q,l,$){var u,v,r,I;const m=b("VLoading"),_=b("RouterLink"),y=b("OrderForm");return a(),d(h,null,[e("div",de,[c(m,{active:t.cartLoading},null,8,["active"])]),e("div",ce,[(u=t.cart.carts)!=null&&u.length?(a(),d(h,{key:0},[e("div",re,[ie,e("div",ue,[e("table",me,[_e,e("tbody",null,[(a(!0),d(h,null,f(t.cart.carts,s=>(a(),d("tr",{key:s.id},[e("td",pe,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:t.loadingItem===s.id,onClick:n=>t.deleteCartItem(s.id)}," X ",8,he)]),e("td",be,[e("img",{src:s.product.imageUrl,alt:s.product.title+" image",class:"cart-product-image"},null,8,ve)]),e("td",null,i(s.product.title),1),e("td",null,[k(e("select",{name:"",class:"form-select","onUpdate:modelValue":n=>s.qty=n,onChange:n=>t.updateItemNum(s)},[(a(!0),d(h,null,f(s.product.stock,n=>(a(),d("option",{value:n,key:n+"123"},i(n),9,fe))),128))],40,ge),[[U,s.qty]])]),e("td",ye,i(s.product.price),1),e("td",Ve,i(s.final_total),1)]))),128))]),e("tfoot",null,[(v=t.cart.carts)!=null&&v.length?(a(),d("tr",ke,[e("td",Ce,[e("button",{type:"button",class:"btn btn-outline-danger",disabled:t.loadingItem==="all",onClick:o[0]||(o[0]=s=>t.deleteCartAll())}," 清空全部 ",8,xe)])])):V("",!0)])])]),e("ul",we,[(a(!0),d(h,null,f(t.cart.carts,s=>(a(),d("li",{class:"card mb-3",key:s.id},[e("div",$e,[e("div",Ie,[e("img",{src:s.product.imageUrl,class:"rounded-start",alt:s.product.title+" image"},null,8,Ue)]),e("div",Fe,[e("div",Ne,[e("h5",qe,i(s.product.title),1),e("div",Se,[e("small",null,"單價："+i(s.product.price),1)]),e("div",Le,[Oe,k(e("select",{name:"",id:"",class:"form-select w-auto flex-grow-1","onUpdate:modelValue":n=>s.qty=n,onChange:n=>t.updateItemNum(s)},[(a(!0),d(h,null,f(s.product.stock,n=>(a(),d("option",{value:n,key:n+"123"},i(n),9,Be))),128))],40,je),[[U,s.qty]])]),e("div",Me,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:t.loadingItem===s.id,onClick:n=>t.deleteCartItem(s.id)}," 刪除 ",8,Ae)])])])])]))),128))])]),e("div",Ee,[e("ul",Te,[e("li",De,[e("div",Pe,[k(e("input",{type:"text",class:"form-control",placeholder:"優惠券代碼","aria-label":"coupon","aria-describedby":"coupon-button","onUpdate:modelValue":o[1]||(o[1]=s=>l.code=s)},null,512),[[L,l.code]]),e("button",{class:"btn btn-outline-theme",type:"button",id:"coupon-button",onClick:o[2]||(o[2]=s=>t.useCoupon(`${l.code}`))}," 使用 ")])]),e("li",null,[t.cart.carts[0].coupon?(a(),d("div",Re,[e("span",ze,"已套用優惠券:"+i((r=t.cart.carts[0])==null?void 0:r.coupon.code),1)])):V("",!0)]),e("li",Xe,[e("div",Ge,[He,e("span",null,i(t.cart.total),1)])]),e("li",Je,[e("div",Ke,[Qe,e("span",null,i(t.cart.final_total),1)])])])])],64)):(a(),d("div",We,[Ye,Ze,c(_,{to:"/products",class:"btn btn-lg btn-theme"},{default:N(()=>[j("搶購去!")]),_:1})])),(I=t.cart.carts)!=null&&I.length?(a(),O(y,{key:2,cart:t.cart,"get-Carts":t.getCarts},null,8,["cart","get-Carts"])):V("",!0)])],64)}const lt=F(ae,[["render",et],["__scopeId","data-v-d2c6580b"]]);export{lt as default};
