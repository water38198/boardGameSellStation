import{_ as u,o as s,c as o,a as e,t as c,e as g,w as b,F as p,r as d,n as _,E as h,i as v,f as $,m as k,b as P,j as w}from"./index-3cozGc54.js";import{C as A}from"./CategoryNavbar-DKDxdT6W.js";const N={props:{article:{type:Object,required:!0},index:{typeof:Number,required:!0}}},L={class:"me-1 me-md-4 bg-theme text-white fw-bold list-number"},q=["src"],T={class:"ms-3 overflow-hidden"},j={class:"fs-4 text-truncate pe-3"},V={class:"text-b60"},B={class:"mb-0 pe-3 text-truncate"};function S(a,n,t,m,l,r){const i=d("RouterLink");return s(),o(p,null,[e("span",L,c(t.index+1),1),g(i,{to:`../article/${t.article.id}`,class:"w-100 d-flex align-items-center link-dark text-decoration-none link-hover article-card"},{default:b(()=>[e("img",{src:t.article.image,alt:"article image",class:"rounded-3 d-block"},null,8,q),e("div",T,[e("h3",j,c(t.article.title),1),e("span",V,c(a.$timeTransform(t.article.create_at)),1),e("p",B,c(t.article.description),1)])]),_:1},8,["to"])],64)}const E=u(N,[["render",S],["__scopeId","data-v-8c47186b"]]),F={props:{pagination:{type:Object,required:!0}},emits:["changePage"]},M={key:0,"aria-label":"Page navigation",class:"mt-5"},O={class:"pagination justify-content-center"},R=e("span",{"aria-hidden":"true"},"«",-1),z=[R],D=["onClick"],I=e("span",{"aria-hidden":"true"},"»",-1),G=[I];function H(a,n,t,m,l,r){return t.pagination.total_pages>1?(s(),o("nav",M,[e("ul",O,[e("li",{class:_(["page-item",{disabled:t.pagination.current_page===1}])},[e("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:n[0]||(n[0]=h(i=>a.$emit("changePage",t.pagination.current_page-1),["prevent"]))},z)],2),(s(!0),o(p,null,v(t.pagination.total_pages,i=>(s(),o("li",{key:i+"page",class:_(["page-item",{active:i===t.pagination.current_page}])},[e("a",{class:"page-link",href:"#",onClick:h(f=>a.$emit("changePage",i),["prevent"])},c(i),9,D)],2))),128)),e("li",{class:_(["page-item",{disabled:t.pagination.current_page===t.pagination.total_pages}])},[e("a",{class:"page-link",href:"#","aria-label":"Next",onClick:n[1]||(n[1]=h(i=>a.$emit("changePage",t.pagination.current_page+1),["prevent"]))},G)],2)])])):$("",!0)}const J=u(F,[["render",H]]),K={components:{CategoryNavbar:A,ArticleCard:E,ArticlesPagination:J},data(){return{pagination:{total_pages:0,current_page:1},categoryList:["全部","新聞","心得","開箱"]}},computed:{...k(w,["articles","articleLoading"]),category(){return this.$route.query.category||""},filteredArticles(){return!this.category||this.category==="全部"?this.articles:this.articles.filter(a=>a.category===this.category)},categoryText(){return this.category==="新聞"?"最新消息":this.category==="心得"?"心得分享":this.category==="開箱"?"開箱文章":"全部文章"},currentPage(){return this.filteredArticles.slice((this.pagination.current_page-1)*10,this.pagination.current_page*10)}},methods:{changeCategory(a){this.$router.push(`/articles?category=${a}`)},changePage(a){this.pagination.current_page=a,console.log(this.pagination.currentPage),window.scrollTo(0,0)}},watch:{category(a,n){a!==n&&(this.$route.query.category=a)},filteredArticles(){this.pagination.total_pages=Math.floor(this.filteredArticles.length/10)+1,this.pagination.current_page=1}}},Q={class:"container bg-white article-container pb-5"},U={class:"row g-3"},W={class:"col-lg-3"},X=e("h3",{class:"text-theme text-center h3"},"文章類別",-1),Y={class:"col-lg-9"},Z={class:"fs-3 bg-theme p-4 text-white mb-0 rounded-top"},ee=e("i",{class:"bi bi-card-list me-2"},null,-1),te={class:"list-group list-group-flush"};function ae(a,n,t,m,l,r){const i=d("CategoryNavbar"),f=d("ArticleCard"),C=d("ArticlesPagination");return s(),o("div",Q,[e("div",U,[e("div",W,[g(i,{onChangeCategory:r.changeCategory,"current-category":r.category,"category-list":l.categoryList},{title:b(()=>[X]),_:1},8,["onChangeCategory","current-category","category-list"])]),e("div",Y,[e("h2",Z,[ee,P(c(r.categoryText),1)]),e("ol",te,[(s(!0),o(p,null,v(r.currentPage,(y,x)=>(s(),o("li",{key:y.id,class:"list-group-item d-flex px-0 px-sm-4 py-4 align-items-center overflow-hidden"},[g(f,{article:y,index:x},null,8,["article","index"])]))),128))]),g(C,{pagination:l.pagination,onChangePage:r.changePage},null,8,["pagination","onChangePage"])])])])}const re=u(K,[["render",ae]]);export{re as default};
