import{_ as x,m as k,r as m,o as l,c as g,f,a as t,n as c,b as w,t as p,F as d,k as y,u as _,g as C,w as A,p as L,d as P}from"./index-bf03b7d5.js";import{u as T}from"./utilities-99040fad.js";import{S as V}from"./sweetalert2.all-950390c3.js";const S={data(){return{category:"全部",randomPic:"https://picsum.photos/100",articles:[],pagination:{total_pages:0,current_page:1},isLoading:!1}},computed:{filteredArticles(){return this.category==="全部"?this.articles:this.articles.filter(e=>e.category===this.category)},transformCategoryText(){return this.category==="新聞"?"最新消息":this.category==="心得"?"心得分享":this.category==="開箱"?"開箱文章":"全部文章"},currentPage(){return this.filteredArticles.slice((this.pagination.current_page-1)*10,this.pagination.current_page*10)}},methods:{changeCategory(e){this.category=e,this.$router.push(`/articles?category=${e}`)},getArticles(e=1){this.isLoading=!0;const{VITE_URL:i,VITE_PATH:h}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/boardGameSellStation/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};this.$http.get(`${i}/v2/api/${h}/articles?page=${e}`).then(r=>{this.articles=this.articles.concat(r.data.articles),r.data.pagination.total_pages>1&&r.data.pagination.current_page<r.data.pagination.total_pages&&this.getArticles(e+1)}).catch(r=>{V.fire({title:"錯誤發生",icon:"error",text:`${r.response.data.message}，請嘗試重新整理，如果此狀況持續發生，請聯絡我們`})}).finally(()=>{this.isLoading=!1})},changePage(e){this.pagination.current_page=e,window.scrollTo(0,0)},...k(T,["timeTransform"])},watch:{category(e,i){e!==i&&(this.$route.query.category=e)},filteredArticles(){this.pagination.total_pages=Math.floor(this.filteredArticles.length/10)+1,this.pagination.current_page=1}},mounted(){this.getArticles(),this.category=this.$route.query.category}},a=e=>(L("data-v-45450b96"),e=e(),P(),e),E={class:"container bg-white article-container"},I={class:"row g-3"},R={class:"col-lg-3 col-xl-2 mt-0 mt-xl-3"},N={class:"list-group text-center flex-row flex-lg-column list-group-flush article-list-group",style:{position:"sticky",top:"90px"}},B=a(()=>t("span",{class:"d-none d-sm-block"},"全部文章",-1)),D=a(()=>t("span",{class:"d-sm-none"},"全部",-1)),M=[B,D],U=a(()=>t("span",{class:"d-none d-sm-block"},"最新消息",-1)),j=a(()=>t("span",{class:"d-sm-none"},"新聞",-1)),q=[U,j],z=a(()=>t("span",{class:"d-none d-sm-block"},"心得分享",-1)),F=a(()=>t("span",{class:"d-sm-none"},"心得",-1)),H=[z,F],O=a(()=>t("span",{class:"d-none d-sm-block"},"開箱文章",-1)),G=a(()=>t("span",{class:"d-sm-none"},"開箱",-1)),J=[O,G],K={class:"col-lg-9 col-xl-10"},Q={class:"fs-2 bg-theme py-4 py-md-7 ps-4 text-white mb-0 rounded-top"},W=a(()=>t("i",{class:"bi bi-card-list me-2"},null,-1)),X={class:"list-group list-group-flush"},Y={class:"me-4 bg-theme text-white fw-bold",style:{"font-size":"80%",padding:"3px 8px","border-radius":"3px"}},Z={class:"position-relative link-image"},$=["src"],tt={class:"ms-3",style:{flex:"1","min-width":"0"}},et={class:"fs-4 text-truncate"},st={class:"text-b60"},it={class:"mb-0 text-truncate"},ot={key:0,"aria-label":"Page navigation",class:"mt-5"},at={class:"pagination justify-content-center"},nt=a(()=>t("span",{"aria-hidden":"true"},"«",-1)),rt=[nt],ct=["onClick"],lt=a(()=>t("span",{"aria-hidden":"true"},"»",-1)),gt=[lt];function pt(e,i,h,r,o,n){const b=m("VLoading"),v=m("RouterLink");return l(),g(d,null,[f(b,{active:o.isLoading},null,8,["active"]),t("div",E,[t("div",I,[t("div",R,[t("div",N,[t("button",{type:"button",class:c(["list-group-item list-group-item-action",{active:o.category==="全部"}]),"aria-current":"true","data-bs-toggle":"list",onClick:i[0]||(i[0]=s=>n.changeCategory("全部")),id:"all"},M,2),t("button",{type:"button",class:c(["list-group-item list-group-item-action",{active:o.category==="新聞"}]),"data-bs-toggle":"list",onClick:i[1]||(i[1]=s=>n.changeCategory("新聞")),id:"news"},q,2),t("button",{type:"button",class:c(["list-group-item list-group-item-action",{active:o.category==="心得"}]),"data-bs-toggle":"list",onClick:i[2]||(i[2]=s=>n.changeCategory("心得")),id:"reviews"},H,2),t("button",{type:"button",class:c(["list-group-item list-group-item-action",{active:o.category==="開箱"}]),"data-bs-toggle":"list",onClick:i[3]||(i[3]=s=>n.changeCategory("開箱")),id:"unboxings"},J,2)])]),t("div",K,[t("h2",Q,[W,w(p(n.transformCategoryText),1)]),t("ol",X,[(l(!0),g(d,null,y(n.currentPage,(s,u)=>(l(),g("li",{key:s.id,class:"list-group-item d-flex px-0 px-sm-4 py-4 align-items-center"},[t("span",Y,p(u+1),1),f(v,{to:`../article/${s.id}`,class:"d-flex align-items-center link-dark text-decoration-none link-hover",style:{height:"100px","min-width":"0"}},{default:A(()=>[t("div",Z,[t("img",{src:s.image,alt:"article image",style:{width:"100px",height:"100px","object-fit":"cover"},class:"rounded-3",onerror:"this.onerror=null;this.src='/src/assets/no_image_icon.png'"},null,8,$)]),t("div",tt,[t("h3",et,p(s.title),1),t("span",st,p(e.timeTransform(s.create_at)),1),t("p",it,p(s.description),1)])]),_:2},1032,["to"])]))),128))]),o.pagination.total_pages>1?(l(),g("nav",ot,[t("ul",at,[t("li",{class:c(["page-item",{disabled:o.pagination.current_page===1}])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:i[4]||(i[4]=_(s=>n.changePage(o.pagination.current_page-1),["prevent"]))},rt)],2),(l(!0),g(d,null,y(o.pagination.total_pages,s=>(l(),g("li",{class:c(["page-item",{active:s===o.pagination.current_page}]),key:s+"page"},[t("a",{class:"page-link",href:"#",onClick:_(u=>n.changePage(s),["prevent"])},p(s),9,ct)],2))),128)),t("li",{class:c(["page-item",{disabled:o.pagination.current_page===o.pagination.total_pages}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:i[5]||(i[5]=_(s=>n.changePage(o.pagination.current_page+1),["prevent"]))},gt)],2)])])):C("",!0)])])])],64)}const ut=x(S,[["render",pt],["__scopeId","data-v-45450b96"]]);export{ut as default};
