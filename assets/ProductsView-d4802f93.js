import{C as P}from"./CategoryNavbar-8eb8fc8a.js";import{c as m}from"./cartStore-580ef00a.js";import{e as L,m as V,_ as f,r as d,o as s,q as v,w as x,a as t,t as n,c as r,b as y,u as S,F as g,g as b,S as I,f as _,j as T}from"./index-af0b791f.js";import{P as $}from"./PaginationComponent-71b2a4ee.js";import"./utilities-5292ba46.js";const E={props:{product:{type:Object,required:!0}},computed:{...L(m,["loadingItem","cart"])},methods:{...V(m,["addToCart"]),isInStock(a){const c=this.cart.carts.find(e=>e.product.id===a.id);return c?c.product.stock===c.qty:!1}}},B={class:"card h-100"},M={class:"product-image"},N=["src","alt"],R={class:"card-body"},D={class:"card-title"},q={class:"card-text text-truncate my-3"},A={key:0,class:"h4 text-end"},H={key:1,class:"d-flex justify-content-between"},j={class:"h6 text-secondary"},U={class:"h4"},G={class:"text-danger"},O={class:"text-center mt-2 text-center"},F={key:0,type:"button",class:"btn btn-outline-danger",disabled:""},W=["disabled"];function Y(a,c,e,l,o,i){const u=d("RouterLink");return s(),v(u,{to:`/product/${e.product.id}`,class:"text-reset text-decoration-none product-card",href:"#"},{default:x(()=>[t("div",B,[t("div",M,[t("img",{src:e.product.imageUrl,class:"card-img-top",alt:`${e.product.title}圖片`},null,8,N)]),t("div",R,[t("h4",D,n(e.product.title),1),t("p",q,n(e.product.description),1),e.product.origin_price===e.product.price?(s(),r("div",A,n(e.product.price)+"元 ",1)):(s(),r("div",H,[t("div",null,[t("del",j,"原價"+n(e.product.origin_price)+"元",1)]),t("div",U,[y(" 特價 "),t("span",G,n(e.product.price),1),y(" 元 ")])])),t("div",O,[a.cart.carts?(s(),r(g,{key:0},[i.isInStock(e.product)?(s(),r("button",F," 目前無庫存 ")):(s(),r("button",{key:1,type:"button",class:"btn btn-outline-danger",disabled:a.loadingItem===e.product.id,onClick:c[0]||(c[0]=S(h=>a.addToCart(e.product),["self","prevent"]))}," 加入購物車 ",8,W))],64)):b("",!0)])])])]),_:1},8,["to"])}const z=f(E,[["render",Y],["__scopeId","data-v-9c5d930e"]]),J={data(){return{products:[],page:{},isLoading:!1,categoryList:["全部","策略","家庭","派對","雙人","合作","劇情"]}},computed:{category(){return this.$route.query.category||""}},components:{PaginationComponent:$,ProductCard:z,CategoryNavbar:P},methods:{getProducts(a=1,c=""){const{VITE_URL:e,VITE_PATH:l}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/boardGameSellStation/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};this.isLoading=!0,this.axios.get(`${e}/v2/api/${l}/products?page=${a}&category=${c}`).then(o=>{this.products=o.data.products,this.page=o.data.pagination}).catch(o=>{I.fire({title:"錯誤發生",icon:"error",text:`${o.response.data.message}，請嘗試重新整理，如果此狀況持續發生，請聯絡我們`})}).finally(()=>{this.isLoading=!1})},changeCategory(a){this.$router.push(`/products?category=${a}`),window.scrollTo(0,0)}},watch:{category(){this.$route.path==="/products"&&(this.category==="全部"?this.getProducts(1,""):this.getProducts(1,this.category))}},mounted(){this.getProducts(1,this.category)}},K={class:"container bg-white pt-100 pb-5"},Q={class:"row g-3"},X={class:"col-lg-3"},Z=t("h3",{class:"text-theme text-center h3"},"商品類別",-1),tt={class:"col-lg-9 position-relative"},et={class:"row g-3 align-items-stretch"},ot={class:"h3 text-theme text-center"},st=["data-aos-duration"],at=t("div",{class:"text-center"},[t("img",{src:"https://images.unsplash.com/photo-1660922771242-c598e0808188?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",alt:"sorry, there is no items in this category",class:"w-50"})],-1),ct=t("div",{class:"text-center fs-4"}," 很抱歉，目前沒有此類商品，近期將會新增! ",-1);function rt(a,c,e,l,o,i){const u=d("CategoryNavbar"),h=d("VLoading"),C=d("ProductCard"),k=d("PaginationComponent");return s(),r("div",K,[t("div",Q,[t("div",X,[_(u,{onChangeCategory:i.changeCategory,category:i.category,"category-list":o.categoryList},{header:x(()=>[Z]),_:1},8,["onChangeCategory","category","category-list"])]),t("div",tt,[_(h,{active:o.isLoading,"is-full-page":!1},null,8,["active"]),t("div",et,[t("h3",ot,n(i.category||"全部"),1),o.products.length?(s(!0),r(g,{key:0},T(o.products,(p,w)=>(s(),r("div",{class:"col-md-6 col-xl-4",key:p.id,"data-aos":"fade-up","data-aos-duration":`${1e3+w*200}`},[_(C,{product:p},null,8,["product"])],8,st))),128)):(s(),r(g,{key:1},[at,ct],64)),o.page.total_pages>1?(s(),v(k,{key:2,pages:o.page,"get-Method":i.getProducts},null,8,["pages","get-Method"])):b("",!0)])])])])}const _t=f(J,[["render",rt]]);export{_t as default};
