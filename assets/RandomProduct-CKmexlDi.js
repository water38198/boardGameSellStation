import{_ as m,S as _,o as a,c,e as i,a as p,F as f,i as g,f as y,r as u}from"./index-wGNvv-RW.js";import{P}from"./ProductCard-2Vtsbzkq.js";var L={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/boardGameSellStation/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:v,VITE_PATH:A}=L,E={props:{currentProduct:{type:Object}},components:{ProductCard:P},data(){return{products:[],isLoading:!1}},methods:{async getProducts(){this.isLoading=!0;try{const t=await this.axios.get(`${v}/v2/api/${A}/products/all`);this.products=t.data.products}catch(t){_.fire({title:"錯誤發生",icon:"error",text:`${t.response.data.message}，請嘗試重新整理，如果此狀況持續發生，請聯絡我們`})}finally{this.isLoading=!1}},getRandomArray(t){const r=[],o=t<4?t:4;for(;r.length<o;){const s=Math.floor(Math.random()*t);r.includes(s)||r.push(s)}return r}},computed:{randomProducts(){const t=[];if(this.products.length>0)if(this.currentProduct){const{category:r,id:o}=this.currentProduct,s=this.products.filter(e=>e.category==r&&e.id!==o);this.getRandomArray(s.length).forEach(e=>t.push(s[e]))}else this.getRandomArray(4).forEach(o=>t.push(this.products[o]));return t}},mounted(){this.getProducts()}},R={key:0,class:"mb-4"},V={key:0,class:"my-4"},S={key:1,class:"my-4"},k={class:"row g-2"};function T(t,r,o,s,n,e){const l=u("VLoading"),h=u("ProductCard");return e.randomProducts.length>0?(a(),c("div",R,[i(l,{active:n.isLoading},null,8,["active"]),o.currentProduct?(a(),c("h3",V,"類似商品")):(a(),c("h3",S,"猜你喜歡")),p("div",k,[(a(!0),c(f,null,g(e.randomProducts,d=>(a(),c("div",{key:d.id,class:"col-lg-3 col-6 align-self-stretch"},[i(h,{product:d},null,8,["product"])]))),128))])])):y("",!0)}const x=m(E,[["render",T]]);export{x as R};
