import{_ as C,f as k,m as w,r as p,o as i,c as a,a as e,y as r,g as u,t as d,F as h,j as I,w as V,b as _,h as L,p as P,i as S}from"./index-48da424a.js";import{c as f}from"./cartStore-a66a436e.js";import{P as T}from"./PaginationComponent-d7a5c05b.js";import{S as E}from"./sweetalert2.all-9de85cd1.js";const{VITE_URL:M,VITE_PATH:R}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/boardGameSellStation/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},B={data(){return{products:[],page:{},productIsLoading:!1,category:"all",listTitle:"全部"}},computed:{...k(f,["loadingItem","cart"])},components:{PaginationComponent:T},methods:{changeCategory(o,s){this.listTitle=s.target.textContent,this.category=o,this.getProducts(1,this.category)},getProducts(o=1,s=""){this.productIsLoading=!0,s==="all"&&(s=""),this.$http.get(`${M}/v2/api/${R}/products?page=${o}&category=${s}`).then(g=>{this.products=g.data.products,this.page=g.data.pagination}).catch(()=>{E.fire({icon:"error",title:"發生錯誤",text:"即將回到首頁，如果錯誤持續發生，請通知我們，感謝!!",didClose:()=>{this.$router.push("/")}})}).finally(()=>{this.productIsLoading=!1})},...w(f,["addToCart"])},mounted(){this.getProducts()}},m=o=>(P("data-v-0a1f6278"),o=o(),S(),o),D={class:"container bg-white py-5"},j={class:"row g-3"},A={class:"col-lg-3"},H={class:"product-category"},U=m(()=>e("h3",{class:"text-theme text-center h3"},"商品類別",-1)),N={class:"list-group text-center fs-5 flex-row flex-lg-column list-group-flush"},G={class:"col-lg-9 vl-parent"},q={class:"row g-3 align-items-stretch"},F={class:"h3 text-theme text-center"},O=["data-aos-duration"],W={class:"card h-100"},Y=["src","alt"],z={class:"card-body d-flex flex-column"},J={class:"card-title"},K={class:"card-text text-truncate my-3"},Q={key:0,class:"h4 mt-auto text-end"},X={key:1,class:"mt-auto d-flex justify-content-between"},Z={class:"h6"},$={class:"h4"},tt={class:"text-danger"},et={class:"text-center mt-2 text-center"},st={key:0,type:"button",class:"btn btn-outline-danger",disabled:""},ot=["disabled","onClick"],it=m(()=>e("div",{class:"text-center"},[e("img",{src:"https://images.unsplash.com/photo-1660922771242-c598e0808188?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",alt:"",class:"w-50"})],-1)),at=m(()=>e("div",{class:"text-center fs-4"}," 很抱歉，目前沒有此類商品，近期將會新增! ",-1));function nt(o,s,g,rt,l,n){const v=p("VLoading"),y=p("RouterLink"),x=p("PaginationComponent");return i(),a("div",D,[e("div",j,[e("div",A,[e("div",H,[U,e("div",N,[e("a",{class:"list-group-item list-group-item-action active list-group-item","aria-current":"true","data-bs-toggle":"list",href:"#",onClick:s[0]||(s[0]=r(t=>n.changeCategory("all",t),["prevent"]))}," 全部 "),e("a",{class:"list-group-item list-group-item-action","data-bs-toggle":"list",href:"#",onClick:s[1]||(s[1]=r(t=>n.changeCategory("策略",t),["prevent"]))},"策略"),e("a",{class:"list-group-item list-group-item-action","data-bs-toggle":"list",href:"#",onClick:s[2]||(s[2]=r(t=>n.changeCategory("家庭",t),["prevent"]))},"家庭"),e("a",{class:"list-group-item list-group-item-action","data-bs-toggle":"list",href:"#",onClick:s[3]||(s[3]=r(t=>n.changeCategory("派對",t),["prevent"]))},"派對"),e("a",{class:"list-group-item list-group-item-action","data-bs-toggle":"list",href:"#",onClick:s[4]||(s[4]=r(t=>n.changeCategory("雙人",t),["prevent"]))},"雙人"),e("a",{class:"list-group-item list-group-item-action","data-bs-toggle":"list",href:"#",onClick:s[5]||(s[5]=r(t=>n.changeCategory("合作",t),["prevent"]))},"合作"),e("a",{class:"list-group-item list-group-item-action","data-bs-toggle":"list",href:"#",onClick:s[6]||(s[6]=r(t=>n.changeCategory("劇情",t),["prevent"]))},"劇情")])])]),e("div",G,[u(v,{active:l.productIsLoading,"onUpdate:active":s[7]||(s[7]=t=>l.productIsLoading=t),"can-cancel":!1,"is-full-page":!1},null,8,["active"]),e("div",q,[e("h3",F,d(l.listTitle),1),l.products.length?(i(!0),a(h,{key:0},I(l.products,(t,b)=>(i(),a("div",{class:"col-md-6 col-xl-4",key:t.id,"data-aos":"fade-up","data-aos-duration":`${1e3+b*200}`},[u(y,{to:`/product/${t.id}`,class:"text-reset text-decoration-none"},{default:V(()=>[e("div",W,[e("img",{src:t.imageUrl,class:"card-img-top",alt:`${t.title}圖片`,style:{height:"250px","object-fit":"cover","object-position":"top"}},null,8,Y),e("div",z,[e("h4",J,d(t.title),1),e("p",K,d(t.description),1),t.origin_price===t.price?(i(),a("div",Q,d(t.price)+"元 ",1)):(i(),a("div",X,[e("div",null,[e("del",Z,"原價"+d(t.origin_price)+"元",1)]),e("div",$,[_(" 現在只要"),e("span",tt,d(t.price),1),_("元 ")])])),e("div",et,[o.cart.carts?(i(),a(h,{key:0},[o.cart.carts.find(c=>c.product.id===t.id)&&o.cart.carts.find(c=>c.product.id===t.id).product.stock===o.cart.carts.find(c=>c.product.id===t.id).qty?(i(),a("button",st," 目前無庫存 ")):(i(),a("button",{key:1,type:"button",class:"btn btn-outline-danger",disabled:o.loadingItem===t.id,onClick:r(c=>o.addToCart(t),["prevent"])}," 加入購物車 ",8,ot))],64)):L("",!0)])])])]),_:2},1032,["to"])],8,O))),128)):(i(),a(h,{key:1},[it,at],64)),u(x,{pages:l.page,"get-Method":n.getProducts},null,8,["pages","get-Method"])])])])])}const pt=C(B,[["render",nt],["__scopeId","data-v-0a1f6278"]]);export{pt as default};
