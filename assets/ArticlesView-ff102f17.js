import{_ as p,r as g,o as s,c,a as e,t as o,f as u,w as y,n as _,u as h,F as x,j as C,g as k,e as $,b as P,k as w,q as A}from"./index-af0b791f.js";import{C as N}from"./CategoryNavbar-8eb8fc8a.js";import{u as T}from"./useTimeTransform-54f68a18.js";const q={setup(){const{timeTransform:t}=T();return{timeTransform:t}},props:{article:{type:Object,required:!0},index:{typeof:Number,required:!0}}},L={class:"list-group-item d-flex px-0 px-sm-4 py-4 align-items-center overflow-hidden"},j={class:"me-1 me-md-4 bg-theme text-white fw-bold",style:{"font-size":"80%",padding:"3px 8px","border-radius":"3px"}},B=["src"],V={class:"ms-3 overflow-hidden article-content"},S={class:"fs-4 text-truncate pe-3"},z={class:"text-b60"},F={class:"mb-0 pe-3 text-truncate"};function M(t,r,a,d,l,n){const i=g("RouterLink");return s(),c("li",L,[e("span",j,o(a.index+1),1),u(i,{to:`../article/${a.article.id}`,class:"w-100 d-flex align-items-center link-dark text-decoration-none link-hover article-card",style:{height:"100px"}},{default:y(()=>[e("img",{src:a.article.image,alt:"article image",class:"rounded-3 d-block",onerror:"this.onerror=null;this.src='/src/assets/no_image_icon.png'"},null,8,B),e("div",V,[e("h3",S,o(a.article.title),1),e("span",z,o(d.timeTransform(a.article.create_at)),1),e("p",F,o(a.article.description),1)])]),_:1},8,["to"])])}const O=p(q,[["render",M],["__scopeId","data-v-3a1f597a"]]),R={props:{pagination:{type:Object,required:!0}},emits:["changePage"]},D={key:0,"aria-label":"Page navigation",class:"mt-5"},E={class:"pagination justify-content-center"},I=e("span",{"aria-hidden":"true"},"«",-1),G=[I],H=["onClick"],J=e("span",{"aria-hidden":"true"},"»",-1),K=[J];function Q(t,r,a,d,l,n){return a.pagination.total_pages>1?(s(),c("nav",D,[e("ul",E,[e("li",{class:_(["page-item",{disabled:a.pagination.current_page===1}])},[e("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:r[0]||(r[0]=h(i=>t.$emit("changePage",a.pagination.current_page-1),["prevent"]))},G)],2),(s(!0),c(x,null,C(a.pagination.total_pages,i=>(s(),c("li",{class:_(["page-item",{active:i===a.pagination.current_page}]),key:i+"page"},[e("a",{class:"page-link",href:"#",onClick:h(m=>t.$emit("changePage",i),["prevent"])},o(i),9,H)],2))),128)),e("li",{class:_(["page-item",{disabled:a.pagination.current_page===a.pagination.total_pages}])},[e("a",{class:"page-link",href:"#","aria-label":"Next",onClick:r[1]||(r[1]=h(i=>t.$emit("changePage",a.pagination.current_page+1),["prevent"]))},K)],2)])])):k("",!0)}const U=p(R,[["render",Q]]),W={data(){return{randomPic:"https://picsum.photos/100",pagination:{total_pages:0,current_page:1},categoryList:["全部","新聞","心得","開箱"]}},computed:{...$(w,["articles","articleLoading"]),category(){return this.$route.query.category||""},filteredArticles(){return!this.category||this.category==="全部"?this.articles:this.articles.filter(t=>t.category===this.category)},transformCategoryText(){return this.category==="新聞"?"最新消息":this.category==="心得"?"心得分享":this.category==="開箱"?"開箱文章":"全部文章"},currentPage(){return this.filteredArticles.slice((this.pagination.current_page-1)*10,this.pagination.current_page*10)}},methods:{changeCategory(t){this.$router.push(`/articles?category=${t}`)},changePage(t){this.pagination.current_page=t,window.scrollTo(0,0)}},components:{CategoryNavbar:N,ArticleCard:O,ArticlesPagination:U},watch:{category(t,r){t!==r&&(this.$route.query.category=t)},filteredArticles(){this.pagination.total_pages=Math.floor(this.filteredArticles.length/10)+1,this.pagination.current_page=1}}},X={class:"container bg-white article-container pt-100 pb-5"},Y={class:"row g-3"},Z={class:"col-lg-3"},ee=e("h3",{class:"text-theme text-center h3"},"文章類別",-1),te={class:"col-lg-9"},ae={class:"fs-2 bg-theme py-4 ps-4 text-white mb-0 rounded-top"},ie=e("i",{class:"bi bi-card-list me-2"},null,-1),re={class:"list-group list-group-flush"};function ne(t,r,a,d,l,n){const i=g("CategoryNavbar"),m=g("ArticleCard"),v=g("ArticlesPagination");return s(),c("div",X,[e("div",Y,[e("div",Z,[u(i,{onChangeCategory:n.changeCategory,category:n.category,"category-list":l.categoryList},{header:y(()=>[ee]),_:1},8,["onChangeCategory","category","category-list"])]),e("div",te,[e("h2",ae,[ie,P(o(n.transformCategoryText),1)]),e("ol",re,[(s(!0),c(x,null,C(n.currentPage,(f,b)=>(s(),A(m,{key:f.id,article:f,index:b},null,8,["article","index"]))),128))]),u(v,{pagination:l.pagination,onChangePage:n.changePage},null,8,["pagination","onChangePage"])])])])}const le=p(W,[["render",ne]]);export{le as default};
