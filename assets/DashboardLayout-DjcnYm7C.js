import{_ as m,o as h,c as p,a as t,e as o,w as n,b as i,r as c,S as u,k as g,f as v}from"./index-BpZpzotS.js";const b={methods:{logout(){document.cookie="myToken=; expires=Thu, 01 Jan 1970 00:00:00 GMT;",this.$router.push("/login")}}},x={class:"navbar navbar-expand bg-dark py-0","data-bs-theme":"dark"},$={class:"container-lg"},L={class:"w-100 navbar-nav align-items-center"},V={class:"nav-item link-light"},y={class:"nav-item"},C={class:"nav-item"},T={class:"nav-item"},R={class:"nav-item ms-auto"};function w(r,a,e,f,l,d){const s=c("RouterLink");return h(),p("nav",x,[t("div",$,[o(s,{class:"navbar-brand px-0 me-0 me-sm-4",to:"/"},{default:n(()=>[i("桌遊販電")]),_:1}),t("ul",L,[t("li",V,[o(s,{to:"/dashboard/products",class:"link-light"},{default:n(()=>[i("商品")]),_:1})]),t("li",y,[o(s,{to:"/dashboard/orders",class:"link-light"},{default:n(()=>[i("訂單")]),_:1})]),t("li",C,[o(s,{to:"/dashboard/coupons",class:"link-light"},{default:n(()=>[i("優惠券")]),_:1})]),t("li",T,[o(s,{to:"/dashboard/articles",class:"link-light"},{default:n(()=>[i("文章")]),_:1})]),t("li",R,[t("button",{type:"button",class:"btn btn-light",onClick:a[0]||(a[0]=(..._)=>d.logout&&d.logout(..._))},"登出")])])])])}const D=m(b,[["render",w],["__scopeId","data-v-96793a31"]]);var E={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/boardGameSellStation/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:N}=E,S={components:{DashboardNavbar:D},data(){return{isChecked:!1,isLoading:!1}},methods:{async loginCheck(){var a;this.isLoading=!0;const r=(a=document.cookie.split("; ").find(e=>e.startsWith("myToken=")))==null?void 0:a.split("=")[1];this.axios.defaults.headers.common.Authorization=r;try{const e=await this.axios.post(`${N}/v2/api/user/check`);this.isChecked=!0,e.data.success||u.fire({title:"錯誤發生",icon:"error",text:"請重新登入",didClose:()=>{this.$router.push("/login")}})}catch(e){u.fire({title:"錯誤發生",icon:"error",text:`${e.response.data.message}`,didClose:()=>{this.$router.push("/login")}})}finally{this.isLoading=!1}}},mounted(){this.loginCheck()}},B=t("h1",{class:"text-center"},"後台",-1),I=t("hr",null,null,-1),A=t("hr",null,null,-1),U={class:"container-lg"};function G(r,a,e,f,l,d){const s=c("VLoading"),_=c("DashboardNavbar"),k=c("RouterView");return h(),p("div",null,[o(s,{active:l.isLoading},null,8,["active"]),B,I,o(_),A,t("div",U,[l.isChecked?(h(),g(k,{key:0})):v("",!0)])])}const O=m(S,[["render",G]]);export{O as default};
