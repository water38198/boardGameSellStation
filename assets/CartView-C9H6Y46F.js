import{m as V,h as g,_ as y,o as d,c,a as e,F as f,i as $,t as u,C as k,D as F,f as C,p as L,d as N,e as a,w as q,n as b,r as _,H as S,b as O}from"./index-BpZpzotS.js";import{c as h}from"./cartStore-YP0yA_Ov.js";const j={props:{cart:{type:Object,required:!0}},computed:{...V(h,["loadingItem"])},methods:{...g(h,["deleteCartItem","updateItemNum","deleteCartAll"])}},T=t=>(L("data-v-b8a93ae8"),t=t(),N(),t),A={key:0,class:"table mt-5 align-middle"},M=T(()=>e("thead",null,[e("tr",null,[e("th"),e("th",{class:"text-center"},"商品圖片"),e("th",null,"商品名稱"),e("th",null,"數量/單位"),e("th",{class:"text-end"},"單價"),e("th",{class:"text-end"},"總價")])],-1)),B={style:{width:"50px"}},D=["disabled","onClick"],E={class:"text-center",style:{width:"20%"}},P=["src","alt"],R=["onUpdate:modelValue","onChange"],z=["value"],H={class:"text-end"},X={class:"text-end"},G={key:0},J={class:"text-end",colspan:"7"},K=["disabled"];function Q(t,o,p,x,n,v){var l;return p.cart?(d(),c("table",A,[M,e("tbody",null,[(d(!0),c(f,null,$(p.cart.carts,s=>(d(),c("tr",{key:s.id},[e("td",B,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:t.loadingItem===s.id,onClick:r=>t.deleteCartItem(s.id)},"X",8,D)]),e("td",E,[e("img",{src:s.product.imageUrl,alt:s.product.title+" image",class:"cart-product-image"},null,8,P)]),e("td",null,u(s.product.title),1),e("td",null,[k(e("select",{name:"",class:"form-select","onUpdate:modelValue":r=>s.qty=r,onChange:r=>t.updateItemNum(s)},[(d(!0),c(f,null,$(s.product.stock,r=>(d(),c("option",{value:r,key:r+"123"},u(r),9,z))),128))],40,R),[[F,s.qty]])]),e("td",H,u(s.product.price),1),e("td",X,u(s.final_total),1)]))),128))]),e("tfoot",null,[(l=p.cart.carts)!=null&&l.length?(d(),c("tr",G,[e("td",J,[e("button",{type:"button",class:"btn btn-outline-danger",disabled:t.loadingItem==="all",onClick:o[0]||(o[0]=s=>t.deleteCartAll())}," 清空全部 ",8,K)])])):C("",!0)])])):C("",!0)}const W=y(j,[["render",Q],["__scopeId","data-v-b8a93ae8"]]),Y={props:{cart:{type:Object,required:!0}},computed:{...V(h,["loadingItem"])},methods:{...g(h,["deleteCartItem","updateItemNum","deleteCartAll"])}},Z=t=>(L("data-v-794a4e2d"),t=t(),N(),t),ee={class:"list-unstyled cart-list"},te={class:"d-flex"},se=["src","alt"],oe={class:"flex-grow-1"},le={class:"p-2 d-flex flex-column justify-content-between h-100"},ne={class:"card-title h5 text-truncate"},ae={class:"mb-2"},de={class:"card-text d-flex align-items-center mb-2"},ce=Z(()=>e("span",{class:"mb-2 d-inline-block"},"數量：",-1)),re=["onUpdate:modelValue","onChange"],ie=["value"],ue=["disabled","onClick"];function me(t,o,p,x,n,v){return d(),c("ul",ee,[(d(!0),c(f,null,$(p.cart.carts,l=>(d(),c("li",{class:"card mb-3",key:l.id},[e("div",te,[e("img",{src:l.product.imageUrl,class:"rounded-start w",alt:l.product.title+" image"},null,8,se),e("div",oe,[e("div",le,[e("h5",ne,u(l.product.title),1),e("div",ae,[e("small",null,"單價："+u(l.product.price),1)]),e("div",de,[ce,k(e("select",{class:"form-select form-select-sm w-auto flex-grow-1","onUpdate:modelValue":s=>l.qty=s,onChange:s=>t.updateItemNum(l)},[(d(!0),c(f,null,$(l.product.stock,s=>(d(),c("option",{value:s,key:s+"123"},u(s),9,ie))),128))],40,re),[[F,l.qty]]),e("button",{type:"button",class:"btn btn-outline-danger btn-sm ms-2",disabled:t.loadingItem===l.id,onClick:s=>t.deleteCartItem(l.id)}," 刪除 ",8,ue)])])])])]))),128))])}const _e=y(Y,[["render",me],["__scopeId","data-v-794a4e2d"]]),pe={data(){return{user:{}}},methods:{isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要09開頭的手機號碼十碼"},...g(h,["sendOrder"])}},he={class:"bg-white"},be=e("h3",{class:"h3 text-center text-theme"},"顧客資訊",-1),fe=e("p",{class:"text-center mb-0"},"*為必填",-1),ve={class:"row justify-content-center"},$e={class:"col-10 col-md-8"},ge={class:"row"},ye={class:"mb-3 col-md-6"},xe=e("label",{for:"name",class:"h5"},"*姓名:",-1),Ce={class:"mb-3 col-md-6"},Ve=e("label",{for:"tel",class:"h5"},"*電話:",-1),ke={class:"mb-3 col-md-6"},we=e("label",{for:"email",class:"h5"},"*電子郵件:",-1),Ie={class:"mb-3"},Ue=e("label",{for:"address",class:"h5"},"*地址:",-1),Fe={class:"mb-3"},Le=e("label",{for:"message",class:"h5"},"附註:",-1),Ne=e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-theme w-100 py-2 text-white"}," 送出 ")],-1);function qe(t,o,p,x,n,v){const l=_("VField"),s=_("ErrorMessage"),r=_("VForm");return d(),c("div",he,[be,fe,e("div",ve,[e("div",$e,[a(r,{onSubmit:o[5]||(o[5]=m=>t.sendOrder(n.user)),class:"mt-4 mb-5",ref:"userForm"},{default:q(({errors:m})=>[e("div",ge,[e("div",ye,[xe,a(l,{id:"name",name:"姓名",type:"text",class:b(["form-control",{"is-invalid":m.姓名}]),placeholder:"請輸入 姓名",rules:"required",modelValue:n.user.name,"onUpdate:modelValue":o[0]||(o[0]=i=>n.user.name=i)},null,8,["class","modelValue"]),a(s,{name:"姓名",class:"invalid-feedback"})]),e("div",Ce,[Ve,a(l,{id:"tel",name:"電話",type:"tel",class:b(["form-control",{"is-invalid":m.電話}]),placeholder:"請輸入 電話",rules:v.isPhone,modelValue:n.user.tel,"onUpdate:modelValue":o[1]||(o[1]=i=>n.user.tel=i)},null,8,["class","rules","modelValue"]),a(s,{name:"電話",class:"invalid-feedback"})]),e("div",ke,[we,a(l,{id:"email",name:"電子郵件",type:"email",class:b(["form-control",{"is-invalid":m.電子郵件}]),placeholder:"請輸入 電子郵件",rules:"required||email",modelValue:n.user.email,"onUpdate:modelValue":o[2]||(o[2]=i=>n.user.email=i)},null,8,["class","modelValue"]),a(s,{name:"電子郵件",class:"invalid-feedback"})]),e("div",Ie,[Ue,a(l,{id:"address",name:"地址",type:"text",class:b(["form-control",{"is-invalid":m.地址}]),placeholder:"請輸入 地址",rules:"required",modelValue:n.user.address,"onUpdate:modelValue":o[3]||(o[3]=i=>n.user.address=i)},null,8,["class","modelValue"]),a(s,{name:"地址",class:"invalid-feedback"})]),e("div",Fe,[Le,a(l,{id:"message",name:"附註",type:"text",class:b(["form-control",{"is-invalid":m.附註}]),placeholder:"請輸入 想給店家的話",modelValue:n.user.message,"onUpdate:modelValue":o[4]||(o[4]=i=>n.user.message=i),as:"textarea",cols:"10",rows:"5"},null,8,["class","modelValue"]),a(s,{name:"地址",class:"invalid-feedback"})])]),Ne]),_:1},512)])])])}const Se=y(pe,[["render",qe]]),Oe={components:{CartTable:W,CartList:_e,OrderForm:Se},data(){return{code:""}},computed:{...V(h,["cart","cartLoading","loadingItem"])},methods:{...g(h,["getCarts","useCoupon"])}},je={class:"container-lg px-lg-5"},Te={class:"bg-white px-lg-4"},Ae=e("h3",{class:"text-center text-theme h3 mb-4"},"購物車",-1),Me={class:"d-none d-sm-block"},Be={class:"d-sm-none"},De={class:"bg-white mb-5 px-3 px-lg-4"},Ee={class:"list-unstyled"},Pe={class:"d-flex"},Re={class:"input-group mb-3 ms-auto",style:{width:"250px"}},ze={key:0,class:"text-end"},He={class:"text-danger ms-2"},Xe={class:"d-flex border-bottom py-3"},Ge={class:"ms-auto d-flex justify-content-between",style:{width:"300px"}},Je=e("span",null,"總金額：",-1),Ke={class:"d-flex border-bottom py-3"},Qe={class:"ms-auto d-flex justify-content-between",style:{width:"300px"}},We=e("span",null,"付款金額：",-1),Ye={key:1,class:"text-center py-100"},Ze=e("h3",{class:"fs-2"},"目前購物車中沒有東西喔!!",-1),et=e("p",{class:"fs-4"},"趕快來看看有什麼好物吧!",-1);function tt(t,o,p,x,n,v){var w,I;const l=_("VLoading"),s=_("CartTable"),r=_("CartList"),m=_("OrderForm"),i=_("RouterLink");return d(),c("div",je,[a(l,{active:t.cartLoading},null,8,["active"]),(w=t.cart.carts)!=null&&w.length?(d(),c(f,{key:0},[e("div",Te,[Ae,e("div",Me,[a(s,{cart:t.cart},null,8,["cart"])]),e("div",Be,[a(r,{cart:t.cart},null,8,["cart"])])]),e("div",De,[e("ul",Ee,[e("li",Pe,[e("div",Re,[k(e("input",{type:"text",class:"form-control",placeholder:"優惠券代碼","aria-label":"coupon","aria-describedby":"coupon-button","onUpdate:modelValue":o[0]||(o[0]=U=>n.code=U)},null,512),[[S,n.code]]),e("button",{class:"btn btn-outline-theme",type:"button",id:"coupon-button",onClick:o[1]||(o[1]=U=>t.useCoupon(`${n.code}`))}," 使用 ")])]),e("li",null,[t.cart.carts[0].coupon?(d(),c("div",ze,[e("span",He,"已套用優惠券:"+u((I=t.cart.carts[0])==null?void 0:I.coupon.code),1)])):C("",!0)]),e("li",Xe,[e("div",Ge,[Je,e("span",null,u(t.cart.total),1)])]),e("li",Ke,[e("div",Qe,[We,e("span",null,u(t.cart.final_total),1)])])])]),a(m)],64)):(d(),c("div",Ye,[Ze,et,a(i,{to:"/products",class:"btn btn-lg btn-theme text-white"},{default:q(()=>[O("搶購去!")]),_:1})]))])}const lt=y(Oe,[["render",tt]]);export{lt as default};
